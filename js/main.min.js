function updateFormHeight(){$(".js-collapsableContent").css("max-height",$(".js-collapsableContent").prop("scrollHeight")+"px")}function destacarForm(){$("body").on("click",".a-button.-primary",(function(){setTimeout((function(){$(".js-form").addClass("-blink")}),1e3),setTimeout((function(){$(".js-form").removeClass("-blink")}),3e3)}))}function addMinifyClassOnScroll(t){var n=$(t);$(window).scroll((function(){$(window).scrollTop()>0?n.addClass("-minify"):n.removeClass("-minify")}))}function toggleCollapsable(){updateFormHeight(),$(".js-collapsableButton").on("click",(function(){$(this).toggleClass("-active");var t=$(this).next();"0px"!==t.css("max-height")?(t.css("max-height","0px"),t.css("padding","0px")):t.css("max-height",t.prop("scrollHeight")+"px")}))}function saveData(){$(".js-submitButton").on("click",(function(){var t={};$(".m-heroForm__content input").each((function(){var n=$(this).attr("name"),s=$(this).val();t[n]=s}));var n=$('input[name="instalarSolares"]:checked').val();t.instalarSolares=n,alert(JSON.stringify(t,null,2))}))}function formFuncionality(){var t=$(".js-formStep"),n=$(".js-prevButton"),s=1,e=t.length;function a(t){if(1===t){if(!($("input[name='instalarSolares']:checked").length>0))return $(".js-inputItem").addClass("-invalid"),!1;$(".js-inputItem").removeClass("-invalid")}else if(2===t){var n=$("#name").val(),s=$("#surname").val(),e=$("#email").val(),a=$("#phone").val(),i=$("#privacidad").is(":checked");if(n?$(" .js-inputItem #name").removeClass("-invalid"):$(" .js-inputItem #name").addClass("-invalid"),s?$(" .js-inputItem #surname").removeClass("-invalid"):$(" .js-inputItem #surname").addClass("-invalid"),e?$(" .js-inputItem #email").removeClass("-invalid"):$(" .js-inputItem #email").addClass("-invalid"),a?$(" .js-inputItem #phone").removeClass("-invalid"):$(" .js-inputItem #phone").addClass("-invalid"),i?$(" .js-inputItem #privacidad").removeClass("-invalid"):$(" .js-inputItem #privacidad").addClass("-invalid"),!(n&&s&&e&&a&&i))return alert("Venga va... rellena los campos y acepta los terminos, que es un momento."),!1;if(e&&!function(t){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(t)}(e))return alert("Pon un correo de verdad, no te hagas el remolÃ³n."),!1}return!0}function i(){t.eq(s-1).css("display","flex"),s>=e?($(".js-nextButton").find("span").text("Enviar datos"),$(".js-nextButton").find("img").hide(),$(".js-nextButton").addClass("js-submitButton").addClass("-send").removeClass("js-nextButton"),$(".js-progressBar").css("width","100%")):($(".js-submitButton").find("span").text("Siguiente"),$(".js-submitButton").find("img").show(),$(".js-submitButton").removeClass("js-submitButton").removeClass("-send").addClass("js-nextButton"),$(".js-progressBar").css("width","50%")),n.css("opacity",1==s?"0":"1"),updateFormHeight(),$(".js-progressStepActual").text(s)}t.eq(s-1).css("display","flex"),updateFormHeight(),n.css("opacity",1==s?"0":"1"),$("body").on("click",".js-nextButton",(function(){a(s)&&(t.eq(s-1).hide(),s++,i())})),$("body").on("click",".js-prevButton",(function(){s>1&&(t.eq(s-1).hide(),s--,i())})),$("body").on("click",".js-submitButton",(function(){$(".-invalid").removeClass("-invalid"),function(){if(a(2)){var t={};$(".m-heroForm__content input").each((function(){var n=$(this).attr("name"),s=$(this).val();t[n]=s}));var n=$('input[name="instalarSolares"]:checked').val();t.instalarSolares=n,alert(JSON.stringify(t,null,2))}}()})),$("body").on("click",".js-inputItem",(function(){$(".-invalid").removeClass("-invalid")})),$("body").on("change","input[name='instalarSolares']",(function(){$(".js-progressBar").css("width","50%")}))}function setupDraggableCarrusel(){$(".m-testimonials__content").each((function(){var t=$(this);let n,s,e=!1;t.on("mousedown",(a=>{e=!0,t.addClass("-dragging"),n=a.pageX,s=t.scrollLeft()})),t.on("mousemove",(a=>{e&&t.scrollLeft(s-(a.pageX-n))})),$("body").on("mouseup",(()=>{e=!1,t.removeClass("-dragging")}))}))}function setupClickBtnCarrusel(){$(".o-testimonialsSection").each((function(){var t=$(this).find(".m-testimonials__content");const n=$(this).find(".a-carruselController"),s=($(this).find(".a-carruselController#left"),$(this).find(".a-carruselController#right"),t.find(".m-testimonial__item").first().outerWidth(!0));n.each((function(){const n=$(this);n.click((function(){t.scrollLeft(t.scrollLeft()+("left"===n.attr("id")?-s:s)),e()}))}));const e=()=>{t.scrollLeft()}}))}$(document).ready((function(){addMinifyClassOnScroll(".o-mainHeader"),toggleCollapsable(),formFuncionality(),destacarForm(),setupDraggableCarrusel(),setupClickBtnCarrusel()}));